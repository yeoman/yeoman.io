<!doctype html><html lang=en><head><meta charset=utf-8><title>Yeoman - Modern workflows for modern webapps</title><meta name=viewport content="width=device-width"><link href="http://fonts.googleapis.com/css?family=Droid+Sans|Lekton|Ubuntu+Mono:400,700" rel=stylesheet><link rel=stylesheet href=/assets/css/main.e56a.css><script src=//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js></script><script src=/assets/js/scripts.066a.js></script></head><body class=""><nav><header><a href=/index.html><img src=/assets/img/yeoman-logo.a053.png></a></header><ul><li class=nav-divider><a href=/index.html><img src=/assets/img/icon-home.e05d.png>Home</a></li><li class=nav-divider><a href=/whyyeoman.html><img src=/assets/img/icon-why-yeoman.d00f.png>Why Yeoman?</a></li><li><a href=/gettingstarted.html><img src=/assets/img/icon-getting-started.49a8.png>Getting Started</a></li><li class=nav-sub><a href=/videos.html>Videos</a></li><li class=nav-sub><a href=/about.html>About</a></li><li class=nav-sub><a href=/deployment.html>Deployment</a></li><li class=nav-sub><a href=/support.html>Support</a></li><li><a href=/blog>Blog</a></li><li class="nav-divider nav-sub"><a href=/articles.html>Articles</a></li><li><a href=/generators.html>Generators</a></li><li class=nav-sub><a href=/community-generators.html>Community Generators</a></li><li class=nav-sub><a href=/generators.html#writing-your-first-generator>Write Your First Generator</a></li><li class=nav-sub><a href=/generators.html#get-help>Get Help</a></li><li class=nav-sub><a href=/generators.html#reference-materials>Reference Materials</a></li><li class=nav-sub><a href=/generators.html#snippets>Snippets</a></li><li class="nav-divider nav-sub"><a href=/generators.html#frequently-asked-questions>FAQ</a></li><li><a href=https://github.com/yeoman/yeoman/wiki><img src=/assets/img/icon-documentation.eec7.png>Documentation</a></li><li><a href=/faq.html><img src=/assets/img/icon-faqs.9efe.png>FAQ</a></li><li class=nav-divider><a href=https://plus.google.com/101063139999404044459/posts><img src=/assets/img/icon-google-plus.4a25.png>Google&#43;</a></li><li class=nav-divider><a href=http://twitter.com/yeoman><img src=/assets/img/icon-twitter.0fb3.png>Twitter</a></li><li><a href=http://github.com/yeoman/yeoman><img src=/assets/img/icon-github.6fa5.png>GitHub</a></li><li><a href=https://github.com/yeoman/yeoman/blob/master/contributing.md><img src=/assets/img/icon-contributing.9ac9.png>Contributing</a></li></ul></nav><div id=content><article><h1>Generate a Generator</h1><ul><li><a href=#whats-a-generator>What&#39;s a Generator?</a></li><li><a href=#setup>Setup</a></li><li><a href=#writing-your-first-generator>Writing Your First Generator</a><ul><li><a href=#lets-explore-prompts-a-little-more>Exploring Prompts</a></li><li><a href=#i-mentioned-magic-earlier-heres-some-more>Let&#39;s Talk Magic</a></li></ul></li><li><a href=#okay-huddle-up>Huddle Up</a><ul><li><a href=#where-we-are>Where We Are</a></li><li><a href=#where-were-going>Where We&#39;re Going</a></li></ul></li><li><a href=#writing-your-first-generator-again>Writing Your First Generator... Again</a><ul><li><a href=#templates>Templates</a></li><li><a href=#lets-see-it>Let&#39;s See It</a></li><li><a href=#a-sub-generator>Sub-Generators</a></li></ul></li><li><a href=#writing-your-next-generator>Writing Your Next Generator</a></li><li><a href=#snippets>Snippets</a></li><li><a href=#frequently-asked-questions>FAQ</a></li><li><a href=#reference-materials>Reference Materials</a></li><li><a href=#get-help>Get Help</a></li></ul><h2 id=whats-a-generator>What's a Generator?</h2><p>By now, you&#39;ve probably read the lovely <a href=http://yeoman.io/gettingstarted.html>Getting Started</a> guide, and have used <code>yo webapp</code> to bootstrap your application. Remember all the prompts, like &quot;Would you like to install Bootstrap?&quot;? You&#39;ve used a generator! That was <a href=https://github.com/yeoman/generator-webapp><code>generator-webapp</code></a> in action.</p><p>The idea behind a generator can be simplified to sharing your ideas and best practices with others. It wasn&#39;t long ago using <a href=http://html5boilerplate.com>HTML5 Boilerplate</a> was the best way to get your application off the ground. But now, even the act of cloning and customizing the boilerplate to work within your environment seems strenuous.</p><p><img src=https://raw.github.com/yeoman/yeoman.io/gh-pages/assets/img/yobox.png style="width: 100%; max-width: 400px"></p><p><em>And a day of good to you, sir.</em></p><p>When developing a generator, having the option to &quot;do this else that&quot; based on the response of the user creates a whole new world of possibilities. You can conditionally fetch dependencies, create files, tests, configuration files for various tools (EditorConfig, git, JSHint), and anything else you dream up.</p><p>Working with the terminal, worrying about spawning concurrent processes, creating race conditions, and other concerns you may have about the Node enviroment have been taken care of. Even for the unfamiliar, it&#39;s super easy to get started writing your own generator.</p><p>So, let&#39;s do that.</p><h2 id=setup>Setup</h2><p>To get your system ready for creating your own generator, you&#39;ll need to install <code>yo</code> and <code>generator-generator</code>.</p><p>From your terminal, run:</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash>npm install -g yo generator-generator
</code></pre></div><p>You&#39;re set up!</p><h2 id=writing-your-first-generator>Writing Your First Generator</h2><p>Now that you have <code>yo</code> and <code>generator-generator</code> installed, let&#39;s say we wanted to make a generator to help someone build a simple blog.</p><p>We&#39;ll create a directory to work on our generator called <code>generator-blog</code>. <strong>It&#39;s important to name the directory correctly following the generator-____ convention</strong>. You&#39;ll see why in a moment. Let&#39;s create the directory, and get going!</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash><span class=nv>$ </span>mkdir ~/dev/generator-blog <span class=o>&amp;&amp;</span> <span class=nb>cd</span> <span class=nv>$_</span>
<span class=nv>$ </span>yo generator

    _-----_
   <span class=p>|</span>       <span class=p>|</span>
   <span class=p>|</span>--<span class=o>(</span>o<span class=o>)</span>--<span class=p>|</span>   .--------------------------.
  <span class=sb>`</span>---------´  <span class=p>|</span>    Welcome to Yeoman,    <span class=p>|</span>
   <span class=o>(</span> _´U<span class=sb>`</span>_ <span class=o>)</span>   <span class=p>|</span>   ladies and gentlemen!  <span class=p>|</span>
   /___A___<span class=se>\ </span>  <span class=s1>&#39;__________________________&#39;</span>
    <span class=p>|</span>  ~  <span class=p>|</span>
  __<span class=s1>&#39;.___.&#39;</span>__
´   <span class=sb>`</span>  <span class=p>|</span>° ´ Y <span class=sb>`</span>
</code></pre></div><p>Look at that handsome devil. He will be our friend while creating your generator, and your users&#39; friend when using it.</p><p>He&#39;ll ask you a couple of questions about your intentions.</p><p>Make sure you name your generator &quot;blog&quot;. This will name your generator, <code>generator-blog</code>, in your <code>package.json</code> file. This <code>generator-____</code> is the convention that the <code>yo</code> command requires when your user types <code>yo blog</code>.</p><p>Answer accordingly, and I&#39;ll see you in a minute!</p><p>...</p><p>Hi, again!</p><p>Did he generate all your stuff?</p><div class=highlight><pre><code class="text language-text" data-lang=text>├── app
│   ├── index.js
│   └── templates
│       ├── _bower.json
│       ├── _package.json
│       ├── editorconfig
│       ├── jshintrc
│       └── travis.yml
├── test
│   ├── test-creation.js
│   └── test-load.js
├── .editorconfig
├── .gitattributes
├── .gitignore
├── .jshintrc
├── .travis.yml
├── LICENSE
├── package.json
└── README.md
</code></pre></div><p>When a user first interacts with your generator, they&#39;ll type:</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash>~ yo blog
</code></pre></div><p>You&#39;ll probably want to see what you&#39;re creating and play with it while still developing. To do that, run:</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash>~ npm link
</code></pre></div><p>Because <code>generator-blog</code> was specified as the package name in <code>package.json</code>, <code>npm link</code> will create a symbolic link in a more widely-accessible location (e.g., <code>/usr/local/lib/node_modules/generator-blog</code>). This enables you to access your local <code>~/dev/generator-blog</code> generator globally, making development, and life in general, much easier.</p><p>Switch over to a new tab, create a new folder, and see what you get!</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash>~ mkdir ~/dev/generator-blog-playground <span class=o>&amp;&amp;</span> <span class=nb>cd</span> <span class=nv>$_</span>
~ yo blog

     _-----_
    <span class=p>|</span>       <span class=p>|</span>
    <span class=p>|</span>--<span class=o>(</span>o<span class=o>)</span>--<span class=p>|</span>   .--------------------------.
   <span class=sb>`</span>---------´  <span class=p>|</span>    Welcome to Yeoman,    <span class=p>|</span>
    <span class=o>(</span> _´U<span class=sb>`</span>_ <span class=o>)</span>   <span class=p>|</span>   ladies and gentlemen!  <span class=p>|</span>
    /___A___<span class=se>\ </span>  <span class=s1>&#39;__________________________&#39;</span>
     <span class=p>|</span>  ~  <span class=p>|</span>
   __<span class=s1>&#39;.___.&#39;</span>__
 ´   <span class=sb>`</span>  <span class=p>|</span>° ´ Y <span class=sb>`</span>

Would you like to <span class=nb>enable </span>this option? <span class=o>(</span>Y/n<span class=o>)</span>
</code></pre></div><p>There he is again with his silly questions. Play around for a bit, then come back when you&#39;re ready for a walkthrough of what&#39;s happening behind the scenes.</p><p>...</p><p>Not terribly useful, is it? But did you get a sense of the power you have and the absence of head scratching it took to get there?</p><p>If you were to leave your generator this way, you would have, like, 0 downloads per week. Let&#39;s make it do something useful!</p><p>Open your <code>~/dev/generator-blog</code> folder in your favorite editor, and navigate to <code>app/index.js</code>. This is the starting point for your generator.</p><h4 id=lets-explore-prompts-a-little-more>Let's explore prompts a little more.</h4><div class=highlight><pre><code class="js language-js" data-lang=js><span class=kd>var</span> <span class=nx>prompts</span> <span class=o>=</span> <span class=p>[{</span>
  <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;confirm&#39;</span><span class=p>,</span>
  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;someOption&#39;</span><span class=p>,</span>
  <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;Would you like to enable this option?&#39;</span><span class=p>,</span>
  <span class=k>default</span><span class=o>:</span> <span class=kc>true</span>
<span class=p>}];</span>
</code></pre></div><p>There&#39;s a <code>prompts</code> array, containing an object for each question you wish to ask the user. For our blog, maybe we want it to look something more like:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=kd>var</span> <span class=nx>prompts</span> <span class=o>=</span> <span class=p>[{</span>
  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;blogName&#39;</span><span class=p>,</span>
  <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;What do you want to call your blog?&#39;</span>
<span class=p>}];</span>
</code></pre></div><p>Next, you&#39;ll see something you&#39;ll start seeing a lot more of-- magic. Helper methods given to you from the Yeoman Generator itself.</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=k>this</span><span class=p>.</span><span class=nx>prompt</span><span class=p>(</span><span class=nx>prompts</span><span class=p>,</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>someOption</span> <span class=o>=</span> <span class=nx>props</span><span class=p>.</span><span class=nx>someOption</span><span class=p>;</span>

  <span class=nx>cb</span><span class=p>();</span>
<span class=p>}.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</code></pre></div><p><code>this.prompt</code> ate up our prompts array for it&#39;s first argument, then a callback that will execute after all of the responses have come in.</p><p>Let&#39;s switch this function up to make sense for our application.</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=k>this</span><span class=p>.</span><span class=nx>prompt</span><span class=p>(</span><span class=nx>prompts</span><span class=p>,</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// `props` is an object passed in containing the response values, named in</span>
  <span class=c1>// accordance with the `name` property from your prompt object. So, for us:</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>blogName</span> <span class=o>=</span> <span class=nx>props</span><span class=p>.</span><span class=nx>blogName</span><span class=p>;</span>

  <span class=nx>cb</span><span class=p>();</span>
<span class=p>}.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</code></pre></div><p>Above, we assigned the user&#39;s input to <code>this.blogName</code>. Because of the <code>.bind(this)</code> on the call to <code>this.prompt</code>, we save the context of the <code>BlogGenerator</code> function, so we can use the user&#39;s responses later.</p><p>Yeoman generators rely on the Inquirer.js prompt system. Make sure to checkout the <a href=https://github.com/SBoudrias/Inquirer.js>full documentation over there</a> to learn more about prompt types (checkboxes, lists, etc) and control helpers (validation, prompt hierarchy, filtering, etc).</p><h4 id=i-mentioned-magic-earlier-heres-some-more>I mentioned "magic" earlier. Here's some more.</h4><p>If you scroll back to the top of the file (<code>app/index.js</code>), you&#39;ll see:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=kd>var</span> <span class=nx>BlogGenerator</span> <span class=o>=</span> <span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>BlogGenerator</span><span class=p>(</span><span class=nx>args</span><span class=p>,</span> <span class=nx>options</span><span class=p>,</span> <span class=nx>config</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>yeoman</span><span class=p>.</span><span class=nx>generators</span><span class=p>.</span><span class=nx>Base</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>arguments</span><span class=p>);</span>
  <span class=c1>// ...</span>
<span class=p>};</span>

<span class=nx>util</span><span class=p>.</span><span class=nx>inherits</span><span class=p>(</span><span class=nx>BlogGenerator</span><span class=p>,</span> <span class=nx>yeoman</span><span class=p>.</span><span class=nx>generators</span><span class=p>.</span><span class=nx>NamedBase</span><span class=p>);</span>
</code></pre></div><p>With these two calls, we are inheriting functionality from both <a href=https://github.com/yeoman/generator/blob/master/lib/base.js><code>Base</code></a> and <a href=https://github.com/yeoman/generator/blob/master/lib/named-base.js><code>NamedBase</code></a>. That&#39;s how we were able to call that <code>this.prompt</code> function, as well as many others you&#39;ll see while creating your generator.</p><p>So, back to what we&#39;re doing in this file. Starting from the top, every method you place on the <code>BlogGenerator.prototype</code> will be invoked in the order you&#39;ve written them. If you need a &quot;private&quot; method, just place an underscore in front of the method name, e.g. <code>BlogGenerator.prototype._dontRunMe</code>.</p><p>So, let&#39;s walk through it. From the top.</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=kd>var</span> <span class=nx>BlogGenerator</span> <span class=o>=</span> <span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>BlogGenerator</span><span class=p>(</span><span class=nx>args</span><span class=p>,</span> <span class=nx>options</span><span class=p>,</span> <span class=nx>config</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>yeoman</span><span class=p>.</span><span class=nx>generators</span><span class=p>.</span><span class=nx>Base</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>arguments</span><span class=p>);</span>

  <span class=k>this</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;end&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>installDependencies</span><span class=p>({</span> <span class=nx>skipInstall</span><span class=o>:</span> <span class=nx>options</span><span class=p>[</span><span class=s1>&#39;skip-install&#39;</span><span class=p>]</span> <span class=p>});</span>
  <span class=p>});</span>

  <span class=k>this</span><span class=p>.</span><span class=nx>pkg</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>readFileAsString</span><span class=p>(</span><span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>__dirname</span><span class=p>,</span> <span class=s1>&#39;../package.json&#39;</span><span class=p>)));</span>
<span class=p>};</span>
</code></pre></div><p>This is our constructor function, which will be run first. Out of the box, this:</p><ul><li>wires us up with <code>Base</code></li><li>creates a listener for the <code>end</code> event (when the methods on the prototype finish executing)</li><li>gives us access to our generator&#39;s <code>package.json</code> file</li></ul><p>Next:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=nx>BlogGenerator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>askFor</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>askFor</span><span class=p>()</span> <span class=p>{</span>
  <span class=kd>var</span> <span class=nx>cb</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>async</span><span class=p>();</span>

  <span class=c1>// ...</span>

  <span class=k>this</span><span class=p>.</span><span class=nx>prompt</span><span class=p>(</span><span class=nx>prompts</span><span class=p>,</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
    <span class=c1>// ...</span>

    <span class=nx>cb</span><span class=p>();</span>
  <span class=p>}.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
<span class=p>};</span>
</code></pre></div><p>I&#39;ve extracted the useful bits we haven&#39;t covered yet, just to point out one thing you may have been wondering: what if you need to execute an asynchronous task? Just call <code>this.async()</code>. This will return a function, that you then pass into your asynchronous task as a callback.</p><p><code>this.async()</code> tells the handsome devil he needs to hang on a sec, while we resolve something. Then when the callback is executed, it pokes him in the shoulder until he wakes up, and he&#39;s back on to the next method.</p><p>Next:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=nx>BlogGenerator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>app</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>app</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>mkdir</span><span class=p>(</span><span class=s1>&#39;app&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>mkdir</span><span class=p>(</span><span class=s1>&#39;app/templates&#39;</span><span class=p>);</span>

  <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;_package.json&#39;</span><span class=p>,</span> <span class=s1>&#39;package.json&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;_bower.json&#39;</span><span class=p>,</span> <span class=s1>&#39;bower.json&#39;</span><span class=p>);</span>
<span class=p>};</span>
</code></pre></div><p>This is pretty cool stuff. <code>this.mkdir</code> creates a directory in the directory the user is running your generator from. So, the first two lines simply create some directories for the user. Directory directory directory.</p><p>The last two lines call <code>this.copy</code>, which then removes the <code>_</code> and places the files to the user&#39;s root directory.</p><p>Let&#39;s rewrite this to something more sensible for a blog:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=nx>BlogGenerator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>app</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>app</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>mkdir</span><span class=p>(</span><span class=s1>&#39;posts&#39;</span><span class=p>);</span>

  <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;_package.json&#39;</span><span class=p>,</span> <span class=s1>&#39;package.json&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;_bower.json&#39;</span><span class=p>,</span> <span class=s1>&#39;bower.json&#39;</span><span class=p>);</span>
<span class=p>};</span>
</code></pre></div><p>Next:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=nx>BlogGenerator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>projectfiles</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>projectfiles</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;editorconfig&#39;</span><span class=p>,</span> <span class=s1>&#39;.editorconfig&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;jshintrc&#39;</span><span class=p>,</span> <span class=s1>&#39;.jshintrc&#39;</span><span class=p>);</span>
<span class=p>};</span>
</code></pre></div><p>Just like the <code>app</code> function, this uses <code>this.copy</code> to move over two &quot;project files&quot;.</p><p>Note:</p><p><code>BlogGenerator.prototype.app</code> and <code>BlogGenerator.prototype.projectfiles</code> could just as easily have been written in one method, but it&#39;s the predictable behavior of the Yeoman chain of execution that makes splitting your functionality up into different methods totally up to you.</p><h2 id=okay-huddle-up>Okay, huddle up.</h2><p>Let&#39;s review what we&#39;re trying to do real quick, to make sure we&#39;re on the same page.</p><h3 id=where-we-are>Where we are.</h3><p>When a user types...</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash>~ yo blog
</code></pre></div><p>...they are presented with...</p><div class=highlight><pre><code class="text language-text" data-lang=text>What do you want to call your blog?
</code></pre></div><p>In <code>app/index.js</code>, we&#39;re storing their response on the <code>BlogGenerator</code> prototype as a property called <code>blogName</code>.</p><p>We then copy a few files into their application&#39;s directory, install any Bower or NPM dependencies we decide their app will have, and that&#39;s about it. It may not be the most elaborate example of a generator, but now that you know what&#39;s going on behind the prompts, you can imagine how trivial it will be for you to extend the functionality of this generator to unprecedented levels.</p><h3 id=where-were-going>Where we're going.</h3><p>You&#39;re pretty much armed with all you need to start popping out generators. At this point, it might be a good idea to go make a simple generator or two, or keep playing with the blog generator.</p><p>In the back of your head, start kicking around some ideas for a generator you could use in your workflow at home on personal projects, at work with your peers, in class with fellow students, on the street with stinky saxophone players, etc.</p><p>If you&#39;re sticking with me, here&#39;s what we&#39;re going to work on next:</p><ul><li>Add in some dependencies our target user will need</li><li>Make a sub-generator to let a user create a new post</li><li>Bring in some Grunt tasks</li></ul><p>Intrigued? Join me in our souped-up version of this introduction...</p><h2 id=writing-your-first-generator-again>Writing Your First Generator... Again.</h2><p>Things are looking great for our blog generator. We have enough in place to start making some decisions. So much is possible, but keeping in mind the scope of an introductory walkthrough, here are the decisions I made for us:</p><ul><li>Blog posts will be written in Markdown</li><li>NPM will install some Grunt tasks, and a few other helpers for two custom tasks we&#39;ll give the user:<ul><li><code>grunt build</code> - creates a &quot;wordmap&quot; of keywords from each blog post</li><li><code>grunt server</code> - watches for changes to the Markdown, re-builds the project</li></ul></li><li>Bower will fetch two run-time dependencies:<ul><li><a href=https://github.com/coreyti/showdown>Showdown</a> - translates Markdown into HTML</li><li><a href=https://github.com/stephenplusplus/showup>Showup</a> - a library written for the purposes of this generator</li></ul></li></ul><p>When all is said and done, the user will have a collection of files in a structure resembling:</p><div class=highlight><pre><code class="text language-text" data-lang=text>├── bower_components
│   ├── showdown
│   └── showup
├── posts
│   ├── 2013-06-01-a-blog-post.md
│   └── 2013-06-01-another-blog-post.md
├── .bowerrc
├── .editorconfig
├── .gitignore
├── .jshintrc
├── Gruntfile.js
├── bower.json
├── config.json
├── index.html
├── package.json
└── wordmap.json
</code></pre></div><p>Alright, I think it&#39;s time we go back and edit some more files from <code>~/dev/generator-blog</code> and make this thing happen!</p><h3 id=templates>Templates</h3><p>When our user runs <code>yo blog</code>, they will receive the files from <code>app/templates</code> in the directory they are working in at the time the command is run. Let&#39;s set up some more useful files.</p><p>Remember those <code>_underscored</code> files? Think about it this way: they are lead by an &quot;underscore&quot;, or &quot;Lo-Dash&quot; to indicate we will use <a href=http://lodash.com>Lo-Dash</a> to process them.</p><p>Head back to <code>app/index.js</code>. Since it&#39;s been a while, scroll back to the <code>app</code> function, so we can see if we need to change anything.</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=nx>BlogGenerator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>app</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>app</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>mkdir</span><span class=p>(</span><span class=s1>&#39;posts&#39;</span><span class=p>);</span>

  <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;_package.json&#39;</span><span class=p>,</span> <span class=s1>&#39;package.json&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;_bower.json&#39;</span><span class=p>,</span> <span class=s1>&#39;bower.json&#39;</span><span class=p>);</span>
<span class=p>};</span>
</code></pre></div><p>Hey, that actually held up! We need a few more thangs, though.</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=nx>BlogGenerator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>app</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>app</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>mkdir</span><span class=p>(</span><span class=s1>&#39;posts&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>template</span><span class=p>(</span><span class=s1>&#39;_index.md&#39;</span><span class=p>,</span> <span class=s1>&#39;posts/index.md&#39;</span><span class=p>);</span>

  <span class=k>this</span><span class=p>.</span><span class=nx>template</span><span class=p>(</span><span class=s1>&#39;Gruntfile.js&#39;</span><span class=p>,</span> <span class=s1>&#39;Gruntfile.js&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>template</span><span class=p>(</span><span class=s1>&#39;index.html&#39;</span><span class=p>,</span> <span class=s1>&#39;index.html&#39;</span><span class=p>);</span>

  <span class=k>this</span><span class=p>.</span><span class=nx>template</span><span class=p>(</span><span class=s1>&#39;_bower.json&#39;</span><span class=p>,</span> <span class=s1>&#39;bower.json&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>template</span><span class=p>(</span><span class=s1>&#39;_config.json&#39;</span><span class=p>,</span> <span class=s1>&#39;config.json&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>template</span><span class=p>(</span><span class=s1>&#39;_package.json&#39;</span><span class=p>,</span> <span class=s1>&#39;package.json&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;wordmap.json&#39;</span><span class=p>,</span> <span class=s1>&#39;wordmap.json&#39;</span><span class=p>);</span>
<span class=p>};</span>
</code></pre></div><p>Something new: <code>this.template</code>! Instead of just performing a simple copy, this function will run Lo-Dash through the file matched from the first parameter, then create and place the compiled result at the location passed in as the second argument.</p><p>For our generator, what the user decided to call their blog at our prompt will shape the files we create.</p><p>Create/edit the following files from <a href=https://gist.github.com/stephenplusplus/5647725>this gist</a>.</p><ul><li><code>app/templates/_index.md</code></li><li><code>app/templates/Gruntfile.js</code></li><li><code>app/templates/index.html</code></li><li><code>app/templates/_bower.json</code></li><li><code>app/templates/_config.json</code></li><li><code>app/templates/_package.json</code></li><li><code>app/templates/wordmap.json</code></li></ul><p>You&#39;ll see <code>&lt;%= _.slugify(blogName) %&gt;</code> come up a couple times. <code>slugify</code> is a method provided by <a href=http://epeli.github.io/underscore.string>underscore.string</a>, which takes &quot;A name like this!&quot; and turns it into &quot;a-name-like-this&quot;. <code>blogName</code> refers to <code>this.blogName</code>, which we assigned in the callback to <code>this.prompt</code>.</p><p>We already talked about the different dependencies we have and the purpose of these files. Let&#39;s move on and actually create our first unique method in <code>app/index.js</code>.</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=nx>BlogGenerator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>app</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>app</span><span class=p>()</span> <span class=p>{</span>
  <span class=c1>// ...</span>
<span class=p>};</span>

<span class=nx>BlogGenerator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>runtime</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>runtime</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;bowerrc&#39;</span><span class=p>,</span> <span class=s1>&#39;.bowerrc&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;gitignore&#39;</span><span class=p>,</span> <span class=s1>&#39;.gitignore&#39;</span><span class=p>);</span>
<span class=p>};</span>
</code></pre></div><p>Create/edit the following files from <a href=https://gist.github.com/stephenplusplus/5647725>this gist</a>.</p><ul><li><code>app/templates/bowerrc</code></li><li><code>app/templates/gitignore</code></li></ul><p>We&#39;re just doing a simple copy on these files as they don&#39;t require any dynamically generated content within them.</p><p>At this point, believe it or not, we have a blog generator! Yes, there is some stuff going on in our Gruntfile that we didn&#39;t talk about. Again, though, we just want to focus on getting a generator up and running.</p><p>Let&#39;s see, what time is it for you? If you said drink time, you are correct! Grab one and I&#39;ll meet you back here. Get me something good.</p><h3 id=lets-see-it>Let's See It</h3><p>Let&#39;s test this bad boy out! Flip open a new terminal and type our beloved command:</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash><span class=nv>$ </span>yo blog
</code></pre></div><p>We should see the HD (handsome devil) asking us what we want to call our blog. I don&#39;t know about you, but I name all of my blogs after characters from <a href=http://en.wikipedia.org/wiki/California_Dreams>California Dreams</a>.</p><p>So, for me, after running <code>yo blog</code>, I saw:</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash>What <span class=k>do </span>you want to call your blog? sly winkle
   create posts/index.md
   create Gruntfile.js
   create index.html
   create bower.json
   create config.json
   create package.json
   create wordmap.json
   create .bowerrc
   create .gitignore


I<span class=err>&#39;</span>m all <span class=k>done</span>. Running bower install <span class=p>&amp;</span> npm install <span class=k>for </span>you to install the
required dependencies. If this fails, try running the <span class=nb>command </span>yourself.

<span class=c># whole bunch of &quot;installing...&quot; lines</span>
</code></pre></div><p>If you take a look at the file structure you ended up with, it should match what we had anticipated earlier. Since your NPM and Bower dependencies were installed for you, thanks to <code>this.installDependencies</code> in your <code>BlogGenerator</code> constructor, you have everything you need to try a build. Let&#39;s see what happens.</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash><span class=nv>$ </span>grunt build
Running <span class=s2>&quot;build&quot;</span> task

Done, without errors.
</code></pre></div><p>Why does it have to &quot;quote&quot; our build task? It&#39;s almost offensive.</p><p>Anyway, what that did for us was re-generate <code>posts/index.md</code>. That&#39;s our index, or Table of Contents file that is generated each time <code>grunt build</code> is run.</p><p>The build task also performs the following sub-tasks:</p><ul><li>loops over the files inside of <code>posts/</code><ul><li>strips out 10 of the most commonly used words from each post</li><li>stuffs them in a big array in <code>wordmap.json</code> to enable searching from the front end</li></ul></li></ul><p>If you&#39;re curious to see more, just go look!</p><p>That&#39;s the build task, which is also run from another grunt task; <code>server</code>. Try that one out:</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash><span class=nv>$ </span>grunt server
Running <span class=s2>&quot;build&quot;</span> task

Running <span class=s2>&quot;connect:livereload&quot;</span> <span class=o>(</span>connect<span class=o>)</span> task
Starting connect web serve on localhost:9000.

Running <span class=s2>&quot;open:server&quot;</span> <span class=o>(</span>open<span class=o>)</span> task

Running <span class=s2>&quot;watch&quot;</span> task
</code></pre></div><p>You should now at least see a somewhat finished product. We&#39;re only missing one rather important thing...</p><h3 id=a-sub-generator>A Sub-Generator!</h3><p>The last piece of our generator puzzle is enabling a sub-generator, something that takes your basic &quot;scaffolding&quot; generator a step further. Here&#39;s what we want to see happen:</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash><span class=nv>$ </span>yo blog:post <span class=s2>&quot;California Dreams was good, but not great.&quot;</span>
<span class=c># creates a new markdown file</span>
</code></pre></div><p>Let&#39;s wire it up!</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash><span class=nv>$ </span><span class=nb>cd</span> ~/dev/generator-blog
<span class=nv>$ </span>yo generator:subgenerator <span class=s2>&quot;post&quot;</span>
   create post/index.js
   create post/templates/somefile.js
</code></pre></div><p>Thanks, <code>generator-generator</code>! Let&#39;s see what that <code>post/index.js</code> file it created looks like.</p><p><code>post/index.js</code>:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=s1>&#39;use strict&#39;</span><span class=p>;</span>
<span class=kd>var</span> <span class=nx>util</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;util&#39;</span><span class=p>);</span>
<span class=kd>var</span> <span class=nx>yeoman</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;yeoman-generator&#39;</span><span class=p>);</span>

<span class=kd>var</span> <span class=nx>PostGenerator</span> <span class=o>=</span> <span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>PostGenerator</span><span class=p>(</span><span class=nx>args</span><span class=p>,</span> <span class=nx>options</span><span class=p>,</span> <span class=nx>config</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// By calling `NamedBase` here, we get the argument to the subgenerator call</span>
  <span class=c1>// as `this.name`.</span>
  <span class=nx>yeoman</span><span class=p>.</span><span class=nx>generators</span><span class=p>.</span><span class=nx>NamedBase</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>arguments</span><span class=p>);</span>

  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;You called the post subgenerator with the argument &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>+</span> <span class=s1>&#39;.&#39;</span><span class=p>);</span>
<span class=p>};</span>

<span class=nx>util</span><span class=p>.</span><span class=nx>inherits</span><span class=p>(</span><span class=nx>PostGenerator</span><span class=p>,</span> <span class=nx>yeoman</span><span class=p>.</span><span class=nx>generators</span><span class=p>.</span><span class=nx>NamedBase</span><span class=p>);</span>

<span class=nx>PostGenerator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>files</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>files</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;somefile.js&#39;</span><span class=p>,</span> <span class=s1>&#39;somefile.js&#39;</span><span class=p>);</span>
<span class=p>};</span>
</code></pre></div><p>A sub-generator function, e.g. <code>PostGenerator</code>, works in the same way as a generator function. Your methods will be invoked in the order they are defined, and you&#39;re free to use the methods available to your generator within your sub-generator, such as <code>this.async</code>, <code>this.installDependencies</code>, <code>this.mkdir</code>, etc.</p><p>As was explained in the comment, calling <code>NamedBase</code> will give us &quot;The blog title&quot; from the <code>yo blog:post &quot;The blog title&quot;</code> command as <code>this.name</code>. Let&#39;s test it out.</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash><span class=c># from your playground directory</span>
<span class=nv>$ </span>yo blog:post <span class=s2>&quot;hey, buddy.&quot;</span>
You called the post subgenerator with the argument hey, buddy.
   create somefile.js
</code></pre></div><p>You can probably already tell how simple it will be to get exactly what we want. All we have to do is change some words, what file is created, and what goes in it.</p><p>If you don&#39;t still have <code>post/index.js</code> open, please go back and make the following changes.</p><p><code>post/index.js</code>:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=s1>&#39;use strict&#39;</span><span class=p>;</span>
<span class=kd>var</span> <span class=nx>util</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;util&#39;</span><span class=p>);</span>
<span class=kd>var</span> <span class=nx>yeoman</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;yeoman-generator&#39;</span><span class=p>);</span>

<span class=kd>var</span> <span class=nx>PostGenerator</span> <span class=o>=</span> <span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>PostGenerator</span><span class=p>(</span><span class=nx>args</span><span class=p>,</span> <span class=nx>options</span><span class=p>,</span> <span class=nx>config</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// By calling `NamedBase` here, we get the argument to the subgenerator call</span>
  <span class=c1>// as `this.name`.</span>
  <span class=nx>yeoman</span><span class=p>.</span><span class=nx>generators</span><span class=p>.</span><span class=nx>NamedBase</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>arguments</span><span class=p>);</span>
<span class=p>};</span>

<span class=nx>util</span><span class=p>.</span><span class=nx>inherits</span><span class=p>(</span><span class=nx>PostGenerator</span><span class=p>,</span> <span class=nx>yeoman</span><span class=p>.</span><span class=nx>generators</span><span class=p>.</span><span class=nx>NamedBase</span><span class=p>);</span>

<span class=nx>PostGenerator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>files</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>files</span><span class=p>()</span> <span class=p>{</span>
  <span class=kd>var</span> <span class=nx>today</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>();</span>

  <span class=kd>var</span> <span class=nx>prefix</span> <span class=o>=</span> <span class=nx>today</span><span class=p>.</span><span class=nx>getUTCMonth</span><span class=p>()</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
  <span class=nx>prefix</span> <span class=o>+=</span> <span class=s1>&#39;-&#39;</span> <span class=o>+</span> <span class=nx>today</span><span class=p>.</span><span class=nx>getDate</span><span class=p>();</span>
  <span class=nx>prefix</span> <span class=o>+=</span> <span class=s1>&#39;-&#39;</span> <span class=o>+</span> <span class=nx>today</span><span class=p>.</span><span class=nx>getFullYear</span><span class=p>();</span>

  <span class=kd>var</span> <span class=nx>filename</span> <span class=o>=</span> <span class=nx>prefix</span> <span class=o>+</span> <span class=s1>&#39;-&#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>_</span><span class=p>.</span><span class=nx>slugify</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;.md&#39;</span><span class=p>;</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=s1>&#39;posts/&#39;</span> <span class=o>+</span> <span class=nx>filename</span><span class=p>,</span> <span class=s1>&#39;# &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
<span class=p>};</span>
</code></pre></div><p>We made use of a new method here, <code>this.write</code>. As I&#39;m sure you&#39;ve guessed by now, <code>this.write</code> will write the second argument (the file contents) to the first argument (the file path). For us, we chose to prefix the name of the file with a timestamp, then a slugified version of the post name, to make something like <code>06-01-2013-apples-make-good-juice.md</code>. We passed that in to <code>this.write</code> as its first argument, then a simple <code># Heading</code>-style heading as the content of the Markdown file.</p><p><em>I chose to remove the <code>templates</code> directory, as the file we&#39;re generating is quite small in content. Since it&#39;s just a <code># Heading</code> based on the title of the post, I inlined it into this <code>PostGenerator.prototype.files</code> function. For a larger-scale application, well structured separation is indispensable.</em></p><p>Holy moly, we have a blog generator! Try creating and editing posts. Play with <code>grunt server</code> and <code>grunt build</code>, keeping <code>index.html</code> open to see the results. Did everything work?</p><h2 id=writing-your-next-generator>Writing Your Next Generator</h2><p>For such a long tutorial, we&#39;ve accomplished something rather light-weight. Don&#39;t be fooled, though. You&#39;re running JavaScript (which you&#39;re already familiar with) in a Node world. You don&#39;t have to stick to the built-in helper methods to get the job done. You are free, and encouraged, to think outside the box, create or pull in your own modules, and make your generator do exactly what it needs to.</p><p>Writing a generator is a whole new way of thinking, and as such, it will take a while for the potential to be fully realized and used appropriately. If you have the time and patience required to create something and learn about Yeoman as you go, you will have a <a href=#get-help>world of support</a> available to you.</p><p>Some tips going forward:</p><ul><li><strong>Play</strong> with other generators. - Pick a generator, and see all it can do.</li><li><strong>Review</strong> the code of other generators. <em>One of the most advanced examples is <a href=https://github.com/yeoman/generator-angular><code>generator-angular</code></a>.</em></li><li><strong>Test</strong>. <code>generator-generator</code> comes with a basic testing framework in place. Inspect how it&#39;s set up, and be sure to use it when writing your own generators.</li></ul><h2 id=get-help>Get Help</h2><p>Currently, there are over 90 generators available on NPM-- generators for <a href=https://github.com/yeoman/generator-angular>Angular</a>, <a href=https://github.com/yeoman/generator-backbone>Backbone</a>, <a href=https://github.com/yeoman/generator-ember>Ember</a>, <a href=https://github.com/yeoman/generator-chromeapp>Chrome apps</a>, <a href=https://github.com/zenorocha/generator-firefox-os>FireFox OS</a>, Express stacks, PHP frameworks, <a href=http://yeoman.io/community-generators.html>and more</a>. You are joining a young, growing community of Generator developers when you enter the ring.</p><p>If you hang around the <a href=https://github.com/yeoman/generator>Yeoman &gt; Generator</a> GitHub long enough, you&#39;ll start to recognize some names. There is always a place to let your questions, opinions, and ideas be heard.</p><p>There&#39;s also the <a href="http://webchat.freenode.net/?channels=yeoman">#yeoman freenode IRC room</a> you can hop in. Introduce yourself and let us know what you&#39;re working on.</p><p>We&#39;re all part of the team, working towards the same future: intuitive, scalable, and maintainable applications that start and grow from an intelligent workflow. If you want to help keep the web going in the right direction, come meet other people just like you.</p><p>We look forward to meeting you and your generator!</p><h3 id=snippets>Snippets</h3><p>The following section will help you get acquainted with some common actions you might want to implement when writing your own generator.</p><p><strong>Prompts</strong></p><p>The prompts system can be used to prompt the user for information when scaffolding out a project using a generator or sub-generator. Prompts below take the form of an array of objects, each of which specify:</p><ul><li>type: the type of prompt (defaults to &quot;input&quot;)</li><li>name: a prompt name (which can later be used to access data associated with the response)</li><li>message: the actual question to prompt the user with</li><li>default: the default value</li></ul><div class=highlight><pre><code class="javascript language-javascript" data-lang=javascript><span class=kd>var</span> <span class=nx>prompts</span> <span class=o>=</span> <span class=p>[{</span>
  <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;confirm&#39;</span><span class=p>,</span>
  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;compassBootstrap&#39;</span><span class=p>,</span>
  <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;Would you like to include Twitter Bootstrap for Sass?&#39;</span><span class=p>,</span>
  <span class=k>default</span><span class=o>:</span> <span class=kc>true</span>
<span class=p>},</span> <span class=p>{</span>
  <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;confirm&#39;</span><span class=p>,</span>
  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;includeRequireJS&#39;</span><span class=p>,</span>
  <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;Would you like to include RequireJS (for AMD support)?&#39;</span><span class=p>,</span>
  <span class=k>default</span><span class=o>:</span> <span class=kc>false</span>
<span class=p>}];</span>

<span class=k>this</span><span class=p>.</span><span class=nx>prompt</span><span class=p>(</span><span class=nx>prompts</span><span class=p>,</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// manually deal with the response, get back and store the results.</span>
  <span class=c1>// we change a bit this way of doing to automatically do this in the self.prompt() method.</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>compassBootstrap</span> <span class=o>=</span> <span class=nx>props</span><span class=p>.</span><span class=nx>compassBootstrap</span><span class=p>;</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>includeRequireJS</span> <span class=o>=</span> <span class=nx>props</span><span class=p>.</span><span class=nx>includeRequireJS</span><span class=p>;</span>

  <span class=nx>cb</span><span class=p>();</span>
<span class=p>}.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
<span class=p>};</span>
</code></pre></div><p><strong>Template/copy specific files:</strong></p><p>Copying specific files for your generator output can be done using this.copy() or this.template(). The latter will copy the files over from your generator&#39;s templates directory to the directory the user is currently in. The second argument to this.template() can be used to store a file with a custom filename if required.</p><div class=highlight><pre><code class="javascript language-javascript" data-lang=javascript><span class=nx>Generator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>bootstrapJs</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>bootstrapJs</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>includeRequireJS</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;bootstrap.js&#39;</span><span class=p>,</span> <span class=s1>&#39;app/scripts/vendor/bootstrap.js&#39;</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>};</span>
</code></pre></div><p><strong>Writing content to files:</strong></p><p>Sometimes you may wish to write custom content to a file as a part of your generator&#39;s workflow. This can be done using this.write() which will save custom content to a specified file.</p><div class=highlight><pre><code class="javascript language-javascript" data-lang=javascript><span class=nx>Generator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>mainStylesheet</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>mainStylesheet</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=s1>&#39;app/styles/main.scss&#39;</span><span class=p>,</span> 
    <span class=s1>&#39;MY SASS STYLESHEET CONTENT&#39;</span><span class=p>);</span>
<span class=p>};</span>
</code></pre></div><p><strong>Writing directories and file contents:</strong></p><p>this.write() and this.mkdir() can be similarly used to create new directories, sub-directories and again, write custom content to a new file.</p><div class=highlight><pre><code class="javascript language-javascript" data-lang=javascript><span class=nx>Generator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>app</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>app</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>mkdir</span><span class=p>(</span><span class=s1>&#39;app&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>mkdir</span><span class=p>(</span><span class=s1>&#39;app/scripts&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>mkdir</span><span class=p>(</span><span class=s1>&#39;app/styles&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>mkdir</span><span class=p>(</span><span class=s1>&#39;app/images&#39;</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=s1>&#39;app/index.html&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>indexFile</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=s1>&#39;app/scripts/main.js&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>mainJsFile</span><span class=p>);</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=s1>&#39;app/scripts/hello.coffee&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>mainCoffeeFile</span><span class=p>);</span>
<span class=p>};</span>
</code></pre></div><p><strong>Importing file-content as a string</strong></p><div class=highlight><pre><code class="javascript language-javascript" data-lang=javascript><span class=kd>var</span> <span class=nx>indexFile</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>readFileAsString</span><span class=p>(</span><span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>sourceRoot</span><span class=p>(),</span> <span class=s1>&#39;index.html&#39;</span><span class=p>));</span>
</code></pre></div><p><strong>Scaffolding an index:</strong></p><div class=highlight><pre><code class="javascript language-javascript" data-lang=javascript><span class=nx>Generator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>writeIndex</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>writeIndex</span><span class=p>()</span> <span class=p>{</span>
  <span class=c1>// prepare default content text</span>
  <span class=kd>var</span> <span class=nx>defaults</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;HTML5 Boilerplate&#39;</span><span class=p>,</span> <span class=s1>&#39;Twitter Bootstrap&#39;</span><span class=p>];</span>

  <span class=kd>var</span> <span class=nx>contentText</span> <span class=o>=</span> <span class=p>[</span>
    <span class=s1>&#39;        &lt;div class=&quot;container&quot;&gt;&#39;</span><span class=p>,</span>
    <span class=s1>&#39;            &lt;div class=&quot;hero-unit&quot;&gt;&#39;</span><span class=p>,</span>
    <span class=s1>&#39;                &lt;h1&gt;Allo!&lt;/h1&gt;&#39;</span><span class=p>,</span>
    <span class=s1>&#39;                &lt;p&gt;You now have&lt;/p&gt;&#39;</span><span class=p>,</span>
    <span class=s1>&#39;                &lt;ul&gt;&#39;</span>
  <span class=p>];</span>

  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>includeRequireJS</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>indexFile</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>appendScripts</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>indexFile</span><span class=p>,</span> <span class=s1>&#39;scripts/main.js&#39;</span><span class=p>,</span> <span class=p>[</span>
      <span class=s1>&#39;components/jquery/jquery.js&#39;</span><span class=p>,</span>
      <span class=s1>&#39;scripts/main.js&#39;</span>
    <span class=p>]);</span>

    <span class=k>this</span><span class=p>.</span><span class=nx>indexFile</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>appendFiles</span><span class=p>({</span>
      <span class=nx>html</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>indexFile</span><span class=p>,</span>
      <span class=nx>fileType</span><span class=o>:</span> <span class=s1>&#39;js&#39;</span><span class=p>,</span>
      <span class=nx>optimizedPath</span><span class=o>:</span> <span class=s1>&#39;scripts/coffee.js&#39;</span><span class=p>,</span>
      <span class=nx>sourceFileList</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;scripts/hello.js&#39;</span><span class=p>],</span>
      <span class=nx>searchPath</span><span class=o>:</span> <span class=s1>&#39;.tmp&#39;</span>
    <span class=p>});</span>
  <span class=p>}</span>

  <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>includeRequireJS</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>defaults</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=s1>&#39;RequireJS&#39;</span><span class=p>);</span>
  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>mainJsFile</span> <span class=o>=</span> <span class=s2>&quot;console.log(&#39;Allo!&#39;);&quot;</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=c1>// iterate over defaults and create content string</span>
  <span class=nx>defaults</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>el</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>contentText</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=s1>&#39;                    &lt;li&gt;&#39;</span> <span class=o>+</span> <span class=nx>el</span>  <span class=o>+</span><span class=s1>&#39;&lt;/li&gt;&#39;</span><span class=p>);</span>
  <span class=p>});</span>

  <span class=nx>contentText</span> <span class=o>=</span> <span class=nx>contentText</span><span class=p>.</span><span class=nx>concat</span><span class=p>([</span>
    <span class=s1>&#39;                &lt;/ul&gt;&#39;</span><span class=p>,</span>
    <span class=s1>&#39;                &lt;p&gt;installed.&lt;/p&gt;&#39;</span><span class=p>,</span>
    <span class=s1>&#39;                &lt;h3&gt;Enjoy coding! - Yeoman&lt;/h3&gt;&#39;</span><span class=p>,</span>
    <span class=s1>&#39;            &lt;/div&gt;&#39;</span><span class=p>,</span>
    <span class=s1>&#39;        &lt;/div&gt;&#39;</span><span class=p>,</span>
    <span class=s1>&#39;&#39;</span>
  <span class=p>]);</span>

  <span class=c1>// append the default content</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>indexFile</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>indexFile</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=s1>&#39;&lt;body&gt;&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;body&gt;\n&#39;</span> <span class=o>+</span> <span class=nx>contentText</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=s1>&#39;\n&#39;</span><span class=p>));</span>
<span class=p>};</span>
</code></pre></div><p><strong>You can trigger the installation of Bower dependencies using:</strong></p><div class=highlight><pre><code class="javascript language-javascript" data-lang=javascript> <span class=k>this</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;end&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>installDependencies</span><span class=p>({</span> 
      <span class=nx>skipInstall</span><span class=o>:</span> <span class=nx>options</span><span class=p>[</span><span class=s1>&#39;skip-install&#39;</span><span class=p>]</span> 
    <span class=p>});</span>
  <span class=p>});</span>
</code></pre></div><p><strong>Hooks for sub-generators (e.g common is the name of another generator, considered a piece of an angular app).</strong></p><p>Occasionally, you may wish to provide sub-generators as a part of your generator workflow. A sub-generator takes care of scaffolding one specific piece of an application, such as a view or model. Crafting part of your workflow as a sub-generators means that a broader generator could call them (using <code>this.hookFor</code>) to create an initial application, but you can also later call the sub-generator to just create that one piece (e.g a new view). This might be done using <code>yo myGenerator:mySubGenerator</code>.</p><div class=highlight><pre><code class="javascript language-javascript" data-lang=javascript><span class=k>this</span><span class=p>.</span><span class=nx>hookFor</span><span class=p>(</span><span class=s1>&#39;foo:app&#39;</span><span class=p>,</span> <span class=p>{</span>
  <span class=nx>args</span><span class=o>:</span> <span class=nx>args</span><span class=p>,</span>
  <span class=nx>options</span><span class=o>:</span> <span class=p>{</span>
    <span class=nx>options</span><span class=o>:</span> <span class=p>{</span>
        <span class=s1>&#39;skip-install&#39;</span><span class=o>:</span> <span class=kc>true</span><span class=p>;</span>
    <span class=p>}</span>
  <span class=p>}</span>
<span class=p>});</span>
</code></pre></div><p><strong>Remotely pull in files:</strong></p><div class=highlight><pre><code class="javascript language-javascript" data-lang=javascript><span class=nx>Generator</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>bootstrapFiles</span> <span class=o>=</span> <span class=kd>function</span> <span class=nx>bootstrapFiles</span><span class=p>()</span> <span class=p>{</span>
  <span class=kd>var</span> <span class=nx>appPath</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>appPath</span><span class=p>;</span>
  <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>compassBootstrap</span><span class=p>)</span> <span class=p>{</span>
    <span class=kd>var</span> <span class=nx>cb</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>async</span><span class=p>();</span>

    <span class=k>this</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>appPath</span><span class=p>,</span> <span class=s1>&#39;styles/main.scss&#39;</span><span class=p>),</span>
    <span class=s1>&#39;@import &quot;compass_twitter_bootstrap&quot;;&#39;</span><span class=p>);</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>remote</span><span class=p>(</span><span class=s1>&#39;vwall&#39;</span><span class=p>,</span> <span class=s1>&#39;compass-twitter-bootstrap&#39;</span><span class=p>,</span> <span class=s1>&#39;v2.2.2.2&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>remote</span><span class=p>)</span> <span class=p>{</span>
      <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>return</span> <span class=nx>cb</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
      <span class=p>}</span>
      <span class=nx>remote</span><span class=p>.</span><span class=nx>directory</span><span class=p>(</span><span class=s1>&#39;stylesheets&#39;</span><span class=p>,</span> <span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>appPath</span><span class=p>,</span> <span class=s1>&#39;styles&#39;</span><span class=p>));</span>
      <span class=nx>cb</span><span class=p>();</span>
    <span class=p>});</span>
  <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>bootstrap</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>log</span><span class=p>.</span><span class=nx>writeln</span><span class=p>(</span><span class=s1>&#39;Writing compiled Bootstrap&#39;</span><span class=p>);</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;bootstrap.css&#39;</span><span class=p>,</span> <span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>appPath</span><span class=p>,</span> <span class=s1>&#39;styles/bootstrap.css&#39;</span><span class=p>));</span>
  <span class=p>}</span>
<span class=p>};</span>
</code></pre></div><h2 id=frequently-asked-questions>Frequently Asked Questions</h2><ul><li><p><strong>How do I pull in dependencies using Bower?</strong> Place a bower.json file filled out with Underscore templating in the /templates directory and then run <code>this.installDependencies</code> from within your generator&#39;s app/index.js. Alternatively they can be installed with the following: <code>javascript this.bowerInstall([ &#39;jquery&#39;, &#39;underscore&#39; ], { save: true });</code></p></li><li><p><strong>How do I unit test generators?</strong> Very basic Mocha unit tests will be scaffolded out for you. You can also take a look at the <a href=https://github.com/yeoman/generator-webapp/blob/master/test/test.js>unit tests written for generator-webapp</a> to see an example of what you should be testing.</p></li><li><p><strong>How do I create sub-generators?</strong> See the <a href=https://github.com/yeoman/generator-generator#commands>generator-generator readme</a>.</p></li><li><p><strong>How can I extend my generators to do more than what the system allows out of the box?</strong> Generators are just Node.js and what&#39;s not available in the API can be found over on <a href="http://nodejs.org/api/">nodejs.org</a>.</p></li><li><p><strong>How do I publish my generator to NPM?</strong> Make sure you add relevant keywords to your package so that people can find your generator (e.g <code>yeoman-generator</code>) and then run <code>npm publish</code>. Further information about using NPM and registering packages can be found in the <a href=https://npmjs.org/doc/developers.html>official docs</a>.</p></li></ul><h2 id=reference-materials>Reference Materials</h2><ul><li><a href="http://yeoman.github.io/generator/">Generator API</a></li><li><a href=https://github.com/yeoman/generator/wiki/Testing-generators>Testing generators</a></li></ul></article></div><script>// $script.js - github.com/ded/script.js
  (function(a,b,c){typeof c["module"]!="undefined"&&c.module.exports?c.module.exports=b():typeof c["define"]!="undefined"&&c["define"]=="function"&&c.define.amd?define(a,b):c[a]=b()})("$script",function(){function p(a,b){for(var c=0,d=a.length;c<d;++c)if(!b(a[c]))return j;return 1}function q(a,b){p(a,function(a){return!b(a)})}function r(a,b,i){function o(a){return a.call?a():d[a]}function t(){if(!--n){d[m]=1,l&&l();for(var a in f)p(a.split("|"),o)&&!q(f[a],o)&&(f[a]=[])}}a=a[k]?a:[a];var j=b&&b.call,l=j?b:i,m=j?a.join(""):b,n=a.length;return setTimeout(function(){q(a,function(a){if(h[a])return m&&(e[m]=1),h[a]==2&&t();h[a]=1,m&&(e[m]=1),s(!c.test(a)&&g?g+a+".js":a,t)})},0),r}function s(c,d){var e=a.createElement("script"),f=j;e.onload=e.onerror=e[o]=function(){if(e[m]&&!/^c|loade/.test(e[m])||f)return;e.onload=e[o]=null,f=1,h[c]=2,d()},e.async=1,e.src=c,b.insertBefore(e,b.firstChild)}var a=document,b=a.getElementsByTagName("head")[0],c=/^https?:\/\//,d={},e={},f={},g,h={},i="string",j=!1,k="push",l="DOMContentLoaded",m="readyState",n="addEventListener",o="onreadystatechange";return!a[m]&&a[n]&&(a[n](l,function t(){a.removeEventListener(l,t,j),a[m]="complete"},j),a[m]="loading"),r.get=s,r.order=function(a,b,c){(function d(e){e=a.shift(),a.length?r(e,d):r(e,b,c)})()},r.path=function(a){g=a},r.ready=function(a,b,c){a=a[k]?a:[a];var e=[];return!q(a,function(a){d[a]||e[k](a)})&&p(a,function(a){return d[a]})?b():!function(a){f[a]=f[a]||[],f[a][k](b),c&&c(e)}(a.join("|")),r},r},this)
  var _gaq=[
    ['_setAccount','UA-32956520-1'],
    ['_setDomainName', '.yeoman.io'],
    ['_trackPageview'],['_trackPageLoadTime']
  ];
  $script('http://www.google-analytics.com/ga.js');
  $script('https://apis.google.com/js/plusone.js');
  $script("//platform.twitter.com/widgets.js");</script></body></html>