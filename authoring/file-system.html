<!doctype html><html lang=en><head><meta charset=utf-8><title>Working With The File System | Yeoman</title><meta name=viewport content="width=device-width"><link href="http://fonts.googleapis.com/css?family=Roboto+Slab:400,700|Roboto:400,700,700italic,400italic" rel=stylesheet type=text/css><link rel=stylesheet href=/assets/css/main.d459.css></head><body class=documentation><header class=page-header><div class=container><div class=mobile-bar><h1 class=logo><a href="/"><img src=/assets/img/logo.5674.png alt=Yeoman></a></h1><button class="mobile-menu-toggle ir">open</button></div><nav class=main-menu><ul class=main-nav><li><a href=/learning>Using Yeoman</a><ul class=main-nav-sub><li><a href=/learning/index.html>Getting started</a></li><li><a href=/codelab.html>Tutorial (codelab)</a></li><li><a href=/learning/resources.html>Resources</a></li><li><a href=/learning/deployment.html>Deployment</a></li><li><a href=/learning/faq.html>FAQ</a></li><li><a href=/learning/support.html>Support</a></li></ul></li><li><a href=/generators>Finding Generators</a><ul class=main-nav-sub><li><a href=/generators/official.html>Official Generators</a></li><li><a href=/generators/community.html>Community Generators</a></li></ul></li><li><a href=/authoring class=active>Creating a generator</a></li><li><a href="http://yeoman.github.io/generator/">API</a></li><li><a href=/blog>Blog</a></li></ul></nav></div><!-- /.container --></header><!-- /.page-header --><div id=content><h2 class=page-title><div class=container>Working With The File System</div></h2><div class="container has-sidebar clearfix"><nav class=context-nav><ul><li class=nav-item><a href=/authoring/index.html>Getting started</a></li><li class=nav-item><a href=/authoring/running-context.html>Running Context</a></li><li class=nav-item><a href=/authoring/user-interactions.html>User Interactions</a></li><li class=nav-item><a href=/authoring/composability.html>Composability</a></li><li class=nav-item><a href=/authoring/dependencies.html>Managing Dependencies</a></li><li class=nav-item><a href=/authoring/file-system.html class=active>Interacting with the file system</a></li><li class=nav-item><a href=/authoring/gruntfile.html>Creating a Gruntfile</a></li><li class=nav-item><a href=/authoring/storage.html>Storing user configs</a></li><li class=nav-item><a href=/authoring/testing.html>Unit testing</a></li></ul></nav><article class=main><section class=content-chunk><h2>Location contexts</h2><p>Yeoman file utility are based on the idea you always have two location context on disk. These contexts are important as most file utility methods will act on file path relative to these contexts.</p><p>The first context is the <em>destination context</em>. The destination is the folder where you are writing, it is where you&#39;ll scaffold the application.</p><p>The destination context is defined as either the current working directory or the closest parent folder containing a <code>.yo-rc.json</code> file. The <code>.yo-rc.json</code> file define the root of a project, this allow the end user to run commands in subdirectories and have them works as expected.</p><p>You can get the <em>destination path</em> using <code>generator.destinationRoot()</code>. And you can change it using <code>generator.destinationRoot(&#39;new/path&#39;)</code>.</p><p>The second context is the <em>source context</em>. This is the folder in which you store your templates files. It is usually the folder from which you&#39;ll read.</p><p>The source context is defined as <code>../templates</code> by default. You can get its value using <code>generator.sourceRoot()</code>, and you can change it using <code>generator.sourceRoot(&#39;new/path&#39;)</code>.</p><h2>File utilities</h2><p>Based on the two context described before, a Yeoman generator expose two file utilities objects.</p><ol><li><code>this.dest</code> who&#39;s relative to <code>this.destinationRoot()</code></li><li><code>this.src</code> who&#39;s relative to <code>this.sourceRoot()</code></li></ol><p>There&#39;s also a top level <code>file</code> property who&#39;s not linked to any path. You can require it this way: <code>var file = require(&#39;yeoman-generator&#39;).file</code>.</p><p>These three objects are instances of <a href=https://github.com/SBoudrias/file-utils>File-utils module</a>, a <code>grunt.file</code> like standalone API. Refer to their documentation for a list of available methods.</p><h3>Copying a file</h3><p>To copy a file from your <code>templates/</code> folder to the destination folder:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=k>this</span><span class=p>.</span><span class=nx>dest</span><span class=p>.</span><span class=nx>copy</span><span class=p>(</span><span class=s1>&#39;Gruntfile.js&#39;</span><span class=p>,</span> <span class=s1>&#39;Gruntfile.js&#39;</span><span class=p>);</span>
</code></pre></div><h3>Reading a json file</h3><div class=highlight><pre><code class="js language-js" data-lang=js><span class=kd>var</span> <span class=nx>pkg</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>dest</span><span class=p>.</span><span class=nx>readJSON</span><span class=p>(</span><span class=s1>&#39;package.json&#39;</span><span class=p>);</span>
</code></pre></div><h2>Legacy utilities</h2><p>Yeoman also expose a set of legacy file utilities. You can refer to the [API documentation] to learn more about them. Some feature of the legacy system may still be missing from <a href=https://github.com/SBoudrias/file-utils>File-utils</a>, so feel free to rely on these methods when necessary.</p><p>Our goal however is to eventually deprecate these legacy methods. If you find missing methods you need, then please consider sending a Pull Request to <a href=https://github.com/SBoudrias/file-utils>File-utils</a> and help us close the bridge between our legacy and our new system!</p><h2>Writing existing files</h2><p>Updating an existing file is not always a simple task. The most reliable way to do so is to parse the file AST ( <a href=http://en.wikipedia.org/wiki/Abstract_syntax_tree>abstract syntax tree</a> ) and edit it. The issue here is that playing with AST is quite verbose and quite hard to grasp.</p><p>To help simplify such case, Yeoman provide some common helper methods. Refer to the <a href=http://yeoman.github.io/generator/wiring.html>API documentation</a> for the list of available methods.</p><div class=contribute-doc>Found a typo? An unclear example? Help us improve our documentation by forking and sending your fixes and suggestions. <a href=https://github.com/yeoman/yeoman.io/tree/master/app/authoring/file-system.md>Improve this Page!</a></div></section></article></div></div><footer class=page-footer><ul class="footer-links footer-links-social"><li><a href=https://plus.google.com/101063139999404044459/posts class=icon><img src=/assets/img/social-gplus.c8d9.png alt=Google+></a></li><li><a href=http://twitter.com/yeoman class=icon><img src=/assets/img/social-twitter.d284.png alt=Twitter></a></li><li><a href=http://github.com/yeoman/yeoman class=icon><img src=/assets/img/social-github.27c1.png alt=Github></a></li><li><a href=/blog/atom.xml class=icon><img src=/assets/img/social-feed.e04c.png alt=Feed></a></li></ul><ul class="footer-links footer-links-contribute"><li><a href=/contributing title=Contribute class=btn>Contribute</a></li><li><a href=https://github.com/yeoman/yeoman.io/blob/master/app/authoring/file-system.md class="btn btn-improve" title="Edit this page on Github to help improve the site">Improve this page</a></li></ul></footer><!-- /.footer-links --><script src=//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js></script><script src=/assets/js/scripts.f466.js></script><script>// $script.js - github.com/ded/script.js
  (function(a,b,c){typeof c["module"]!="undefined"&&c.module.exports?c.module.exports=b():typeof c["define"]!="undefined"&&c["define"]=="function"&&c.define.amd?define(a,b):c[a]=b()})("$script",function(){function p(a,b){for(var c=0,d=a.length;c<d;++c)if(!b(a[c]))return j;return 1}function q(a,b){p(a,function(a){return!b(a)})}function r(a,b,i){function o(a){return a.call?a():d[a]}function t(){if(!--n){d[m]=1,l&&l();for(var a in f)p(a.split("|"),o)&&!q(f[a],o)&&(f[a]=[])}}a=a[k]?a:[a];var j=b&&b.call,l=j?b:i,m=j?a.join(""):b,n=a.length;return setTimeout(function(){q(a,function(a){if(h[a])return m&&(e[m]=1),h[a]==2&&t();h[a]=1,m&&(e[m]=1),s(!c.test(a)&&g?g+a+".js":a,t)})},0),r}function s(c,d){var e=a.createElement("script"),f=j;e.onload=e.onerror=e[o]=function(){if(e[m]&&!/^c|loade/.test(e[m])||f)return;e.onload=e[o]=null,f=1,h[c]=2,d()},e.async=1,e.src=c,b.insertBefore(e,b.firstChild)}var a=document,b=a.getElementsByTagName("head")[0],c=/^https?:\/\//,d={},e={},f={},g,h={},i="string",j=!1,k="push",l="DOMContentLoaded",m="readyState",n="addEventListener",o="onreadystatechange";return!a[m]&&a[n]&&(a[n](l,function t(){a.removeEventListener(l,t,j),a[m]="complete"},j),a[m]="loading"),r.get=s,r.order=function(a,b,c){(function d(e){e=a.shift(),a.length?r(e,d):r(e,b,c)})()},r.path=function(a){g=a},r.ready=function(a,b,c){a=a[k]?a:[a];var e=[];return!q(a,function(a){d[a]||e[k](a)})&&p(a,function(a){return d[a]})?b():!function(a){f[a]=f[a]||[],f[a][k](b),c&&c(e)}(a.join("|")),r},r},this)
  var _gaq=[
    ['_setAccount','UA-32956520-1'],
    ['_setDomainName', '.yeoman.io'],
    ['_trackPageview'],['_trackPageLoadTime']
  ];
  $script('http://www.google-analytics.com/ga.js');
  $script('https://apis.google.com/js/plusone.js');
  $script("//platform.twitter.com/widgets.js");</script></body></html>