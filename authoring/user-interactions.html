<!DOCTYPE html><html lang=en data-version=9077f2b><head><meta charset=utf-8><title>Interacting With The User | Yeoman</title><meta name=viewport content="width=device-width"><link rel=icon type=image/x-icon href=/static/favicon.b25e58c4b8.ico><meta name=google-site-verification content=fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w><link href="//fonts.googleapis.com/css?family=Roboto+Slab:400,700%7CRoboto:400,700,700italic,400italic" rel=stylesheet><link rel=stylesheet href=/static/bundle-4834.f4f0dc2058.css><link href=/blog/atom.xml type=application/atom+xml rel=alternate title="Yeoman Blog Atom Feed"></head><body><header class=page-header><div class=container><div class=mobile-bar><h1 class=logo><a href=/ ><img src=/static/logo.2a54d87108.png alt=Yeoman></a></h1><button class="mobile-menu-toggle ir">open</button></div><nav class=main-menu><ul class=main-nav><li><a href=/learning/ >Using Yeoman</a><ul> <li><a href=/learning/index.html>Getting started</a></li> <li><a href=/codelab/index.html>Tutorial (codelab)</a></li> <li><a href=/learning/resources.html>Resources</a></li> <li><a href=/learning/deployment.html>Deployment</a></li> <li><a href=/learning/faq.html>FAQ</a></li> <li><a href=/learning/support.html>Support</a></li></ul></li><li><a href=/generators/ >Discovering generators</a></li> <li><a href=/authoring/ class=active>Creating a generator</a><ul> <li><a href=/authoring/index.html>Getting started</a></li> <li><a href=/authoring/running-context.html>Running Context</a></li> <li><a href=/authoring/user-interactions.html>User Interactions</a></li> <li><a href=/authoring/composability.html>Composability</a></li> <li><a href=/authoring/dependencies.html>Managing Dependencies</a></li> <li><a href=/authoring/file-system.html>Interacting with the file system</a></li> <li><a href=/authoring/storage.html>Storing user configs</a></li> <li><a href=/authoring/testing.html>Unit testing</a></li> <li><a href=/authoring/debugging.html>Debugging Generators</a></li> <li><a href=/authoring/integrating-yeoman.html>Integrating Yeoman in other tools</a></li> <li><a href=https://yeoman.github.io/generator/ >Full API documentation</a></li></ul></li><li><a href=/blog/ >Blog</a></li> <li><a href=/contributing/ >Contributing</a><ul> <li><a href=/contributing/index.html>Contributing</a></li> <li><a href=/contributing/opening-issues.html>How to open an issue</a></li> <li><a href=/contributing/pull-request.html>How to submit a PR</a></li> <li><a href=/contributing/style-guide.html>Style Guide</a></li> <li><a href=/contributing/testing-guidelines.html>Testing Guidelines</a></li> <li><a href=/contributing/ticketing.html>Issue system overview</a></li></ul></li></ul></nav></div></header><div class=SiteWrapper><div id=content><h2 class=page-title><span class=container>Interacting With The User</span></h2><div class="container clearfix has-sidebar"><nav class=context-nav><ul><li><a href=/authoring/index.html>Getting started</a></li> <li><a href=/authoring/running-context.html>Running Context</a></li> <li><a href=/authoring/user-interactions.html>User Interactions</a></li> <li><a href=/authoring/composability.html>Composability</a></li> <li><a href=/authoring/dependencies.html>Managing Dependencies</a></li> <li><a href=/authoring/file-system.html>Interacting with the file system</a></li> <li><a href=/authoring/storage.html>Storing user configs</a></li> <li><a href=/authoring/testing.html>Unit testing</a></li> <li><a href=/authoring/debugging.html>Debugging Generators</a></li> <li><a href=/authoring/integrating-yeoman.html>Integrating Yeoman in other tools</a></li> <li><a href=https://yeoman.github.io/generator/ >Full API documentation</a></li></ul></nav><article class=main><section class=content-chunk><p>Your generator will interact a lot with the end user. By default Yeoman runs on a terminal, but it also supports custom user interfaces that different tools can provide. For example, nothing prevents a Yeoman generator from being run inside of a graphical tool like an editor or a standalone app.</p><p>To allow for this flexibility, Yeoman provides a set of user interface element abstractions. It is your responsibility as an author to only use those abstractions when interacting with your end user. Using other ways will probably prevent your generator from running correctly in different Yeoman tools.</p><p>For example, it is important to never use <code class=highlighter-rouge>console.log()</code> or <code class=highlighter-rouge>process.stdout.write()</code> to output content. Using them would hide the output from users not using a terminal. Instead, always rely on the UI generic <code class=highlighter-rouge>this.log()</code> method, where <code class=highlighter-rouge>this</code> is the context of your current generator.</p><h2 id=user-interactions>User interactions</h2><h3 id=prompts>Prompts</h3><p>Prompts are the main way a generator interacts with a user. The prompt module is provided by <a href=https://github.com/SBoudrias/Inquirer.js>Inquirer.js</a> and you should refer <a href=https://github.com/SBoudrias/Inquirer.js>to its API</a> for a list of available prompt options.</p><p>The <code class=highlighter-rouge>prompt</code> method is asynchronous and returns a promise. You’ll need to return the promise from your task in order to wait for its completion before running the next one. (<a href=/authoring/running-context.html>learn more about asynchronous task</a>)</p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=kd>class</span> <span class=kd>extends</span> <span class=nx>Generator</span> <span class=p>{</span>
  <span class=k>async</span> <span class=nx>prompting</span><span class=p>()</span> <span class=p>{</span>
    <span class=kd>const</span> <span class=nx>answers</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>prompt</span><span class=p>([</span>
      <span class=p>{</span>
        <span class=na>type</span><span class=p>:</span> <span class=s2>"input"</span><span class=p>,</span>
        <span class=na>name</span><span class=p>:</span> <span class=s2>"name"</span><span class=p>,</span>
        <span class=na>message</span><span class=p>:</span> <span class=s2>"Your project name"</span><span class=p>,</span>
        <span class=na>default</span><span class=p>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>appname</span> <span class=c1>// Default to current folder name</span>
      <span class=p>},</span>
      <span class=p>{</span>
        <span class=na>type</span><span class=p>:</span> <span class=s2>"confirm"</span><span class=p>,</span>
        <span class=na>name</span><span class=p>:</span> <span class=s2>"cool"</span><span class=p>,</span>
        <span class=na>message</span><span class=p>:</span> <span class=s2>"Would you like to enable the Cool feature?"</span>
      <span class=p>}</span>
    <span class=p>]);</span>

    <span class=k>this</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>"app name"</span><span class=p>,</span> <span class=nx>answers</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>"cool feature"</span><span class=p>,</span> <span class=nx>answers</span><span class=p>.</span><span class=nx>cool</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>};</span>
</code></pre></div></div><p>Note here that we use the <a href=/authoring/running-context.html><code class=highlighter-rouge>prompting</code> queue</a> to ask for feedback from the user.</p><h4 id=using-user-answers-at-a-later-stage>Using user answers at a later stage</h4><p>A very common scenario is to use the the user answers at a later stage, e.g. in <a href=/authoring/file-system.html><code class=highlighter-rouge>writing</code> queue</a>. This can be easily achieved by adding them to <code class=highlighter-rouge>this</code> context:</p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=kd>class</span> <span class=kd>extends</span> <span class=nx>Generator</span> <span class=p>{</span>
  <span class=k>async</span> <span class=nx>prompting</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>answers</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>prompt</span><span class=p>([</span>
      <span class=p>{</span>
        <span class=na>type</span><span class=p>:</span> <span class=s2>"confirm"</span><span class=p>,</span>
        <span class=na>name</span><span class=p>:</span> <span class=s2>"cool"</span><span class=p>,</span>
        <span class=na>message</span><span class=p>:</span> <span class=s2>"Would you like to enable the Cool feature?"</span>
      <span class=p>}</span>
    <span class=p>]);</span>
  <span class=p>}</span>

  <span class=nx>writing</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>"cool feature"</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>answers</span><span class=p>.</span><span class=nx>cool</span><span class=p>);</span> <span class=c1>// user answer `cool` used</span>
  <span class=p>}</span>
<span class=p>};</span>
</code></pre></div></div><h4 id=remembering-user-preferences>Remembering user preferences</h4><p>A user may give the same input to certain questions every time they run your generator. For these questions, you probably want to remember what the user answered previously and use that answer as the new <code class=highlighter-rouge>default</code>.</p><p>Yeoman extends the Inquirer.js API by adding a <code class=highlighter-rouge>store</code> property to question objects. This property allows you to specify that the user provided answer should be used as the default answer in the future. This can be done as follows:</p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=k>this</span><span class=p>.</span><span class=nx>prompt</span><span class=p>({</span>
  <span class=na>type</span><span class=p>:</span> <span class=s2>"input"</span><span class=p>,</span>
  <span class=na>name</span><span class=p>:</span> <span class=s2>"username"</span><span class=p>,</span>
  <span class=na>message</span><span class=p>:</span> <span class=s2>"What's your GitHub username"</span><span class=p>,</span>
  <span class=na>store</span><span class=p>:</span> <span class=kc>true</span>
<span class=p>});</span>
</code></pre></div></div><p><em>Note:</em> Providing a default value will prevent the user from returning any empty answers.</p><p>If you’re only looking to store data without being directly tied to the prompt, make sure to checkout <a href=/authoring/storage.html>the Yeoman storage documentation</a>.</p><h3 id=arguments>Arguments</h3><p>Arguments are passed directly from the command line:</p><div class=highlighter-rouge><div class=highlight><pre class=highlight><code>yo webapp my-project
</code></pre></div></div><p>In this example, <code class=highlighter-rouge>my-project</code> would be the first argument.</p><p>To notify the system that we expect an argument, we use the <code class=highlighter-rouge>this.argument()</code> method. This method accepts a <code class=highlighter-rouge>name</code> (String) and an optional hash of options.</p><p>The <code class=highlighter-rouge>name</code> argument will then be available as: <code class=highlighter-rouge>this.options[name]</code>.</p><p>The options hash accepts multiple key-value pairs:</p><ul><li><code class=highlighter-rouge>desc</code> Description for the argument</li> <li><code class=highlighter-rouge>required</code> Boolean whether it is required</li> <li><code class=highlighter-rouge>type</code> String, Number, Array (can also be a custom function receiving the raw string value and parsing it)</li> <li><code class=highlighter-rouge>default</code> Default value for this argument</li></ul><p>This method must be called inside the <code class=highlighter-rouge>constructor</code> method. Otherwise Yeoman won’t be able to output the relevant help information when a user calls your generator with the help option: e.g. <code class=highlighter-rouge>yo webapp --help</code>.</p><p>Here is an example:</p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=kd>class</span> <span class=kd>extends</span> <span class=nx>Generator</span> <span class=p>{</span>
  <span class=c1>// note: arguments and options should be defined in the constructor.</span>
  <span class=kd>constructor</span><span class=p>(</span><span class=nx>args</span><span class=p>,</span> <span class=nx>opts</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>super</span><span class=p>(</span><span class=nx>args</span><span class=p>,</span> <span class=nx>opts</span><span class=p>);</span>

    <span class=c1>// This makes `appname` a required argument.</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>argument</span><span class=p>(</span><span class=s2>"appname"</span><span class=p>,</span> <span class=p>{</span> <span class=na>type</span><span class=p>:</span> <span class=nb>String</span><span class=p>,</span> <span class=na>required</span><span class=p>:</span> <span class=kc>true</span> <span class=p>});</span>

    <span class=c1>// And you can then access it later; e.g.</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>options</span><span class=p>.</span><span class=nx>appname</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>};</span>
</code></pre></div></div><p>Argument of type <code class=highlighter-rouge>Array</code> will contain all remaining arguments passed to the generator.</p><h3 id=options>Options</h3><p>Options look a lot like arguments, but they are written as command line <em>flags</em>.</p><div class=highlighter-rouge><div class=highlight><pre class=highlight><code>yo webapp --coffee
</code></pre></div></div><p>To notify the system that we expect an option, we use the <code class=highlighter-rouge>this.option()</code> method. This method accepts a <code class=highlighter-rouge>name</code> (String) and an optional hash of options.</p><p>The <code class=highlighter-rouge>name</code> value will be used to retrieve the option at the matching key <code class=highlighter-rouge>this.options[name]</code>.</p><p>The options hash (the second argument) accepts multiple key-value pairs:</p><ul><li><code class=highlighter-rouge>desc</code> Description for the option</li> <li><code class=highlighter-rouge>alias</code> Short name for option</li> <li><code class=highlighter-rouge>type</code> Either Boolean, String or Number (can also be a custom function receiving the raw string value and parsing it)</li> <li><code class=highlighter-rouge>default</code> Default value</li> <li><code class=highlighter-rouge>hide</code> Boolean whether to hide from help</li></ul><p>Here is an example:</p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=kd>class</span> <span class=kd>extends</span> <span class=nx>Generator</span> <span class=p>{</span>
  <span class=c1>// note: arguments and options should be defined in the constructor.</span>
  <span class=kd>constructor</span><span class=p>(</span><span class=nx>args</span><span class=p>,</span> <span class=nx>opts</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>super</span><span class=p>(</span><span class=nx>args</span><span class=p>,</span> <span class=nx>opts</span><span class=p>);</span>

    <span class=c1>// This method adds support for a `--coffee` flag</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>option</span><span class=p>(</span><span class=s2>"coffee"</span><span class=p>);</span>

    <span class=c1>// And you can then access it later; e.g.</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>scriptSuffix</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>options</span><span class=p>.</span><span class=nx>coffee</span> <span class=p>?</span> <span class=s2>".coffee"</span> <span class=p>:</span> <span class=s2>".js"</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>};</span>
</code></pre></div></div><h2 id=outputting-information>Outputting Information</h2><p>Outputting information is handled by the <code class=highlighter-rouge>this.log</code> module.</p><p>The main method you’ll use is simply <code class=highlighter-rouge>this.log</code> (e.g. <code class=highlighter-rouge>this.log('Hey! Welcome to my awesome generator')</code>). It takes a string and outputs it to the user; basically it mimics <code class=highlighter-rouge>console.log()</code> when used inside of a terminal session. You can use it like so:</p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=kd>class</span> <span class=kd>extends</span> <span class=nx>Generator</span> <span class=p>{</span>
  <span class=nx>myAction</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>"Something has gone wrong!"</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>};</span>
</code></pre></div></div><p>There’s also some other helper methods you can find in the <a href=https://yeoman.github.io/environment/TerminalAdapter.html>API documentation</a>.</p></section></article></div></div><footer class=SiteFooter><div class=SiteFooter-donation><div class=Donation><div class=Donation-sticker-clipping><img src=/static/yeoman-character-sticker.51cef7e007.png class=Donation-sticker width=190 height=294 alt=Stickers!></div><div class=Donation-text><a href=https://yeoman.threadless.com/ >Show your love for <strong>Yeoman</strong>, <br> wear our <strong>merch</strong>!</a></div></div></div><ul class=SiteFooter-links><li><a href=https://plus.google.com/101063139999404044459/posts class=icon><img src=/static/social-gplus.5223e7bc73.svg class=SiteFooter-icon alt=Google+></a></li> <li><a href=https://twitter.com/yeoman class=icon><img src=/static/social-twitter.c359540fc8.svg class=SiteFooter-icon alt=Twitter></a></li> <li><a href=https://github.com/yeoman/yeoman class=icon><img src=/static/social-github.89959ef390.svg class=SiteFooter-icon alt=Github></a></li> <li><a href=/blog/atom.xml class=icon><img src=/static/social-feed.ad4bea7819.svg class=SiteFooter-icon alt=Feed></a></li> <li class=mobile-ln></li> <li><a href=https://yeoman.github.io/generator/ class="SiteFooter-button SiteFooter-button--light">API</a></li> <li><a href=https://github.com/yeoman/yeoman.github.io/blob/source/app/authoring/user-interactions.md class=SiteFooter-button title="Edit this page on Github to help improve the site">Improve this page</a></li></ul></footer><script src=//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js></script><script src=/static/bundle-4893.810b3dd14f.js async></script><script>!function(a,b,c){'undefined'!=typeof c.module&&c.module.exports?c.module.exports=b():'undefined'!=typeof c.define&&'function'==c.define&&c.define.amd?define(a,b):c[a]=b()}('$script',function(){function a(a,b){for(var c=0,d=a.length;c<d;++c)if(!b(a[c]))return m;return 1}function b(b,c){a(b,function(a){return!c(a)})}function c(f,g,m){function o(a){return a.call?a():i[a]}function p(){if(!--t){i[s]=1,r&&r();for(var c in k)a(c.split('|'),o)&&!b(k[c],o)&&(k[c]=[])}}f=f[n]?f:[f];var q=g&&g.call,r=q?g:m,s=q?f.join(''):g,t=f.length;return setTimeout(function(){b(f,function(a){return l[a]?(s&&(j[s]=1),2==l[a]&&p()):(l[a]=1,s&&(j[s]=1),d(!h.test(a)&&e?e+a+'.js':a,p),void 0)})},0),c}function d(a,b){var c=f.createElement('script'),d=m;c.onload=c.onerror=c[r]=function(){c[p]&&!/^c|loade/.test(c[p])||d||(c.onload=c[r]=null,d=1,l[a]=2,b())},c.async=1,c.src=a,g.insertBefore(c,g.firstChild)}var e,f=document,g=f.getElementsByTagName('head')[0],h=/^https?:\/\//,i={},j={},k={},l={},m=!1,n='push',o='DOMContentLoaded',p='readyState',q='addEventListener',r='onreadystatechange';return!f[p]&&f[q]&&(f[q](o,function s(){f.removeEventListener(o,s,m),f[p]='complete'},m),f[p]='loading'),c.get=d,c.order=function(a,b,d){!function e(f){f=a.shift(),a.length?c(f,e):c(f,b,d)}()},c.path=function(a){e=a},c.ready=function(d,e,f){d=d[n]?d:[d];var g=[];return!b(d,function(a){i[a]||g[n](a)})&&a(d,function(a){return i[a]})?e():!function(a){k[a]=k[a]||[],k[a][n](e),f&&f(g)}(d.join('|')),c},c},this);var _gaq=[['_setAccount','UA-32956520-1'],['_setDomainName','.yeoman.io'],['_trackPageview'],['_trackPageLoadTime']];$script('https://www.google-analytics.com/ga.js'),$script('https://apis.google.com/js/plusone.js'),$script('//platform.twitter.com/widgets.js')//# sourceMappingURL=../static/yeoman-4969.f5cbe7e97e.map </script></div></body></html>